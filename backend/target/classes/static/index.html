<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>番茄自习室 - Pomodoro Study Room</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="app">
        <!-- 导航栏 -->
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <i class="fas fa-clock"></i>
                    <span>番茄自习室</span>
                </div>
                <div class="nav-menu">
                    <a href="#home" class="nav-link active" data-page="home">
                        <i class="fas fa-home"></i> 首页
                    </a>
                    <a href="#tasks" class="nav-link" data-page="tasks">
                        <i class="fas fa-tasks"></i> 任务管理
                    </a>
                    <a href="#study-room" class="nav-link" data-page="study-room">
                        <i class="fas fa-users"></i> 自习室
                    </a>
                    <a href="#statistics" class="nav-link" data-page="statistics">
                        <i class="fas fa-chart-bar"></i> 学习统计
                    </a>
                    <a href="#profile" class="nav-link" data-page="profile">
                        <i class="fas fa-user"></i> 个人中心
                    </a>
                </div>
                <div class="nav-auth">
                    <button id="loginBtn" class="btn btn-outline">登录</button>
                    <button id="registerBtn" class="btn btn-primary">注册</button>
                </div>
            </div>
        </nav>

        <!-- 主要内容区域 -->
        <main class="main-content">
            <!-- 首页 -->
            <div id="home-page" class="page active">
                       <div class="hero-section">
                           <h1 id="hero-title">命定的局限尽可永在，不屈的挑战却不可须臾或缺。</h1>
                           <p id="hero-subtitle">专注学习，高效管理时间</p>
                           <div class="hero-customize" style="margin-top: 1rem;">
                               <button id="customizeTextBtn" class="btn btn-outline btn-small">
                                   <i class="fas fa-edit"></i> 自定义文案
                               </button>
                           </div>
                       </div>
                
                <div class="dashboard">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="today-focus">0</h3>
                                <p>今日专注时长(分钟)</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="today-tasks">0</h3>
                                <p>今日完成任务</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-fire"></i>
                            </div>
                            <div class="stat-content">
                                <h3 id="streak-days">0</h3>
                                <p>连续学习天数</p>
                            </div>
                        </div>
                    </div>

                    <!-- 番茄钟计时器 -->
                    <div class="pomodoro-section">
                        <div class="timer-container">
                            <div class="timer-display">
                                <div class="timer-circle">
                                    <div class="timer-time" id="timer">25:00</div>
                                    <div class="timer-mode" id="timerStatus">专注时间</div>
                                </div>
                            </div>
                            <div class="timer-controls">
                                <button id="startBtn" class="btn btn-primary btn-large">
                                    <i class="fas fa-play"></i> 开始
                                </button>
                                <button id="pauseBtn" class="btn btn-secondary btn-large" disabled>
                                    <i class="fas fa-pause"></i> 暂停
                                </button>
                                <button id="resetBtn" class="btn btn-outline btn-large">
                                    <i class="fas fa-redo"></i> 重置
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 任务管理页面 -->
            <div id="tasks-page" class="page">
                <div class="page-header">
                    <h2>任务管理</h2>
                    <button id="addTaskBtn" class="btn btn-primary">
                        <i class="fas fa-plus"></i> 添加任务
                    </button>
                </div>
                <div class="tasks-container">
                    <div class="task-filters">
                        <button id="filterAll" class="filter-btn active" data-filter="all">全部</button>
                        <button id="filterPending" class="filter-btn" data-filter="pending">待开始</button>
                        <button id="filterInProgress" class="filter-btn" data-filter="in-progress">进行中</button>
                        <button id="filterCompleted" class="filter-btn" data-filter="completed">已完成</button>
                    </div>
                    <div id="tasks-list" class="tasks-list">
                        <!-- 任务列表将通过JavaScript动态生成 -->
                    </div>
                </div>
            </div>

            <!-- 自习室页面 -->
            <div id="study-room-page" class="page">
                <div class="page-header">
                    <h2>多人自习室</h2>
                    <button id="createRoomBtn" class="btn btn-primary">
                        <i class="fas fa-plus"></i> 创建房间
                    </button>
                </div>
                
                <!-- 房间列表 -->
                <div class="rooms-section">
                    <h3>可用房间</h3>
                    <div id="rooms-list" class="rooms-list">
                        <!-- 房间列表将通过JavaScript动态生成 -->
                    </div>
                </div>
                
                <!-- 当前房间信息 -->
                <div id="current-room-section" class="current-room-section" style="display: none;">
                    <div class="room-info">
                        <h3 id="current-room-name">当前房间</h3>
                        <div class="room-stats">
                            <span id="room-members-count">成员: 0</span>
                            <span id="room-study-time">学习时长: 0分钟</span>
                        </div>
                    </div>
                    
                    <!-- 学习控制 -->
                    <div class="study-controls">
                        <button id="startStudyBtn" class="btn btn-primary">
                            <i class="fas fa-play"></i> 开始学习
                        </button>
                        <button id="endStudyBtn" class="btn btn-secondary" disabled>
                            <i class="fas fa-stop"></i> 结束学习
                        </button>
                        <button id="leaveRoomBtn" class="btn btn-outline">
                            <i class="fas fa-sign-out-alt"></i> 离开房间
                        </button>
                    </div>
                    
                           <!-- 成员排名 -->
                           <div class="ranking-section">
                               <h4>学习排名</h4>
                               <div id="members-ranking" class="members-ranking">
                                   <!-- 成员排名将通过JavaScript动态生成 -->
                               </div>
                           </div>
                           
                       </div>
            </div>

            <!-- 学习统计页面 -->
            <div id="statistics-page" class="page">
                <div class="page-header">
                    <h2>学习统计</h2>
                </div>
                <div class="stats-container">
                    <div class="chart-section">
                        <h3>学习时长统计</h3>
                        <div id="study-chart" class="chart-container">
                            <!-- 图表将通过JavaScript生成 -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- 个人中心页面 -->
            <div id="profile-page" class="page">
                <div class="page-header">
                    <h2>个人中心</h2>
                </div>
                <div class="profile-container">
                    <div class="profile-card">
                        <div class="profile-avatar">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <div class="profile-info">
                            <h3 id="user-name">用户名</h3>
                            <p id="user-email">user@example.com</p>
                        </div>
                    </div>
                    <div class="profile-stats">
                        <div class="stat-item">
                            <span class="stat-label">总学习时长</span>
                            <span class="stat-value" id="total-study-time">0 小时</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">完成任务数</span>
                            <span class="stat-value" id="total-tasks">0 个</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">连续学习天数</span>
                            <span class="stat-value" id="total-streak">0 天</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- 登录模态框 -->
        <div id="loginModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>用户登录</h3>
                    <span class="close" id="loginClose">&times;</span>
                </div>
                <div class="modal-body">
                    <form id="loginForm" action="/api/user/login" method="POST">
                        <div class="form-group">
                            <label for="loginUsername">用户名</label>
                            <input type="text" id="loginUsername" name="username" required>
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">密码</label>
                            <input type="password" id="loginPassword" name="password" required>
                        </div>
                        <button type="submit" class="btn btn-primary btn-full">登录</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- 注册模态框 -->
        <div id="registerModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>用户注册</h3>
                    <span class="close" id="registerClose">&times;</span>
                </div>
                <div class="modal-body">
                    <form id="registerForm" action="/api/user/register" method="POST">
                        <div class="form-group">
                            <label for="registerUsername">用户名</label>
                            <input type="text" id="registerUsername" name="username" required>
                        </div>
                        <div class="form-group">
                            <label for="registerEmail">邮箱</label>
                            <input type="email" id="registerEmail" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="registerPassword">密码</label>
                            <input type="password" id="registerPassword" name="password" required>
                        </div>
                        <button type="submit" class="btn btn-primary btn-full">注册</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- 添加任务模态框 -->
        <div id="addTaskModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>添加任务</h3>
                    <span class="close">&times;</span>
                </div>
                <div class="modal-body">
                    <form id="addTaskForm">
                        <div class="form-group">
                            <label for="taskName">任务名称</label>
                            <input type="text" id="taskName" name="taskName" required>
                        </div>
                        <div class="form-group">
                            <label for="taskDescription">任务描述</label>
                            <textarea id="taskDescription" name="description" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="taskDuration">预计时长(分钟)</label>
                            <input type="number" id="taskDuration" name="plannedDuration" value="25" min="1" max="120">
                        </div>
                        <div class="form-group">
                            <label for="taskPriority">优先级</label>
                            <select id="taskPriority" name="priority">
                                <option value="1">低</option>
                                <option value="2" selected>中</option>
                                <option value="3">高</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="taskCategory">分类</label>
                            <input type="text" id="taskCategory" name="category" placeholder="如：学习、工作、生活等">
                        </div>
                        <button type="submit" class="btn btn-primary btn-full">添加任务</button>
                    </form>
                </div>
            </div>
        </div>

        <!-- 创建房间模态框 -->
        <div id="createRoomModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>创建自习室</h3>
                    <span class="close">&times;</span>
                </div>
                <div class="modal-body">
                    <form id="createRoomForm">
                        <div class="form-group">
                            <label for="roomName">房间名称</label>
                            <input type="text" id="roomName" name="roomName" required>
                        </div>
                        <div class="form-group">
                            <label for="roomDescription">房间描述</label>
                            <textarea id="roomDescription" name="description" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="maxMembers">最大成员数</label>
                            <input type="number" id="maxMembers" name="maxMembers" value="20" min="2" max="100">
                        </div>
                        <div class="form-group">
                            <label for="roomType">房间类型</label>
                            <select id="roomType" name="roomType">
                                <option value="1">公开房间</option>
                                <option value="2">私密房间</option>
                                <option value="3">密码房间</option>
                            </select>
                        </div>
                        <div class="form-group" id="passwordGroup" style="display: none;">
                            <label for="roomPassword">房间密码</label>
                            <input type="password" id="roomPassword" name="password">
                        </div>
                        <div class="form-group">
                            <label for="studyTheme">学习主题</label>
                            <input type="text" id="studyTheme" name="studyTheme" placeholder="如：考研复习、英语学习等">
                        </div>
                        <button type="submit" class="btn btn-primary btn-full">创建房间</button>
                    </form>
                </div>
            </div>
        </div>

               <!-- 加入房间模态框 -->
               <div id="joinRoomModal" class="modal">
                   <div class="modal-content">
                       <div class="modal-header">
                           <h3>加入房间</h3>
                           <span class="close">&times;</span>
                       </div>
                       <div class="modal-body">
                           <form id="joinRoomForm">
                               <div class="form-group">
                                   <label for="joinRoomId">房间ID</label>
                                   <input type="number" id="joinRoomId" name="roomId" required>
                               </div>
                               <div class="form-group" id="joinPasswordGroup">
                                   <label for="joinPassword">房间密码（如果需要）</label>
                                   <input type="password" id="joinPassword" name="password">
                               </div>
                               <button type="submit" class="btn btn-primary btn-full">加入房间</button>
                           </form>
                       </div>
                   </div>
               </div>

               <!-- 自定义文案模态框 -->
               <div id="customizeTextModal" class="modal">
                   <div class="modal-content">
                       <div class="modal-header">
                           <h3>自定义首页文案</h3>
                           <span class="close">&times;</span>
                       </div>
                       <div class="modal-body">
                           <form id="customizeTextForm">
                               <div class="form-group">
                                   <label for="customTitle">主标题</label>
                                   <input type="text" id="customTitle" name="title" placeholder="输入您的主标题">
                               </div>
                               <div class="form-group">
                                   <label for="customSubtitle">副标题</label>
                                   <input type="text" id="customSubtitle" name="subtitle" placeholder="输入您的副标题">
                               </div>
                               <div class="form-group">
                                   <label for="customColor">文字颜色</label>
                                   <input type="color" id="customColor" name="color" value="#2c3e50">
                               </div>
                               <div class="form-actions">
                                   <button type="button" id="resetTextBtn" class="btn btn-outline">恢复默认</button>
                                   <button type="submit" class="btn btn-primary">保存设置</button>
                               </div>
                           </form>
                       </div>
                   </div>
               </div>
           </div>


           <script>
               console.log('开始加载 app.js...');
               // 检查 app 对象是否已定义
               if (typeof app !== 'undefined') {
                   console.log('app 对象已存在:', app);
               } else {
                   console.log('app 对象未定义');
               }
           </script>
           <script src="js/app.js?v=4.0" onload="console.log('app.js 加载完成')" onerror="console.error('app.js 加载失败')"></script>
           <script>
               console.log('app.js 加载后检查...');
               if (typeof app !== 'undefined') {
                   console.log('app 对象现在存在:', app);
               } else {
                   console.log('app 对象仍然未定义');
               }
           </script>
       </body>
       </html>
